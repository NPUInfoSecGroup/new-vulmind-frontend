import{d as $,u as S,p as V,c as N,r as m,q as x,b as I,e as s,m as C,t as y,s as E,g as c,h as _,w as d,l as P,j as p,_ as b,o as M,v as R,f as j}from"./index-DE1tnjit.js";import q from"./MessageView-ea2BLVvS.js";import{_ as w}from"./TerminalView.vue_vue_type_style_index_0_lang-BsHeOpB9.js";const A={class:"header-section"},U={class:"header-content"},z={key:0},F={class:"id"},G={class:"back-button"},H=$({__name:"TaskInfoView",setup(B){const f=S(),n=V().params.taskID,t=N(()=>f.getById(n)),l=m(!1);async function u(){await f.fetchTasks()}u(),x(t,o=>{o?(console.log("当前任务信息:",o),l.value=!0,v()):l.value=!1},{immediate:!0});function v(){console.log("执行后续逻辑")}return(o,i)=>{const e=_("el-button");return p(),I("div",A,[s("div",U,[l.value?(p(),I("h1",z,y(t.value.name),1)):C("",!0),s("p",F,y(E(n)),1)]),s("div",G,[c(e,{type:"primary",onClick:i[0]||(i[0]=a=>o.$router.back())},{default:d(()=>i[1]||(i[1]=[P("返回")])),_:1,__:[1]})])])}}}),J=b(H,[["__scopeId","data-v-8bc56560"]]),K={class:"common-layout"},L={class:"message-card"},O={class:"header-title"},Q={class:"target"},W={class:"command"},X={class:"action"},Y={class:"terminal"},Z=$({__name:"EnvironmentInfoView",setup(B){const r=V().params.taskID,n=S(),t=m(n.getById(r)),l=m(null),u=m(!1),v=()=>{var e,a;u.value||((e=t.value)==null?void 0:e.status)==="completed"||((a=t.value)==null?void 0:a.status)==="failed"||(u.value=!0,l.value=setInterval(async()=>{var g,h;try{await n.fetchTasks(),t.value=n.getById(r),(((g=t.value)==null?void 0:g.status)==="completed"||((h=t.value)==null?void 0:h.status)==="failed")&&(console.log(`任务 ${r} 已结束，状态: ${t.value.status}`),o())}catch(k){console.error("轮询任务状态失败:",k),o()}},5e3))},o=()=>{l.value&&(clearInterval(l.value),l.value=null),u.value=!1};function i(){n.startTask(r),v()}return M(()=>{v()}),R(()=>{o()}),x(()=>n.getById(r),e=>{t.value=e,((e==null?void 0:e.status)==="completed"||(e==null?void 0:e.status)==="failed")&&o()},{immediate:!0}),(e,a)=>{const g=_("el-button"),h=_("el-aside"),k=_("el-main"),D=_("el-container");return p(),I("div",K,[c(D,null,{default:d(()=>[c(h,{width:"50%",class:"aside"},{default:d(()=>[a[1]||(a[1]=s("h2",null,"环境信息",-1)),s("div",L,[s("div",O,[s("span",Q,y(t.value.target),1),s("span",W,y(t.value.command),1)]),s("div",X,[t.value.status=="pending"?(p(),j(g,{key:0,type:"primary",onClick:i},{default:d(()=>a[0]||(a[0]=[P(" 执行任务 ")])),_:1,__:[0]})):C("",!0)])]),s("div",Y,[c(w)])]),_:1,__:[1]}),c(k,null,{default:d(()=>[a[2]||(a[2]=s("h2",null,"扫描过程",-1)),c(q)]),_:1,__:[2]})]),_:1})])}}}),T=b(Z,[["__scopeId","data-v-a3211435"]]),tt={class:"report-template-view"},et=$({__name:"ScannerPage",setup(B){return m("first"),(f,r)=>(p(),I("div",tt,[c(J),c(T)]))}}),nt=b(et,[["__scopeId","data-v-1a0f5315"]]);export{nt as default};
