import{m as h,p as N,r as i,b as d,d as t,t as m,q as B,f as a,g as r,w as _,i as p,k as g,_ as k,o as P,s as E,n as O,l as A,F as D,j as H,v as I}from"./index-BtKFwgDY.js";import{a as M,M as j}from"./MessageView-DGOVbu8u.js";const F={class:"header-section"},R={class:"header-content"},q={class:"id"},z={class:"back-button"},U=h({__name:"TaskInfoView",setup(b){const u=N().params.taskID,e=i("1123");return(o,l)=>{const n=r("el-button");return p(),d("div",F,[t("div",R,[t("h1",null,m(e.value),1),t("p",q,m(B(u)),1)]),t("div",z,[a(n,{type:"primary",onClick:l[0]||(l[0]=f=>o.$router.back())},{default:_(()=>l[1]||(l[1]=[g("返回")])),_:1,__:[1]})])])}}}),G=k(U,[["__scopeId","data-v-c6510808"]]),J={class:"scan-output card"},K={class:"card-header"},Q={class:"header-controls"},W=["title"],X={class:"card-body"},Y={class:"line-content"},Z={key:0,class:"loading-indicator"},tt=800,et=h({__name:"ScanStatus",setup(b){const c=i([]),u=i(0),e=i(!0),o=i(!0),l=i(),n=i(null);async function f(){try{const s=(await M.get("http://localhost:8000/scan/output",{params:{offset:u.value}})).data.lines||[];s.length>0&&(c.value.push(...s),u.value+=s.length,await I(),o.value&&$()),e.value=!1}catch{e.value=!1}}function y(){l.value=window.setInterval(f,tt)}function w(){l.value&&clearInterval(l.value)}function $(){n.value&&(n.value.scrollTop=n.value.scrollHeight)}function x(){if(!n.value)return;const v=n.value.scrollTop+n.value.clientHeight>=n.value.scrollHeight-20;o.value=v}function C(){c.value=[],u.value=0}function S(){o.value=!o.value,o.value&&I($)}function T(){const v=c.value.map(s=>s.content).join(`
`);navigator.clipboard.writeText(v)}return P(()=>{f(),y()}),E(()=>{w()}),(v,s)=>(p(),d("div",J,[t("div",K,[s[2]||(s[2]=t("span",null,"命令行实时输出",-1)),t("div",Q,[t("button",{class:"control-btn",onClick:C,title:"清空输出"},s[0]||(s[0]=[t("i",{class:"fas fa-trash"},null,-1)])),t("button",{class:"control-btn",onClick:S,title:o.value?"暂停滚动":"启用滚动"},[t("i",{class:O(["fas",o.value?"fa-pause":"fa-play"])},null,2)],8,W),t("button",{class:"control-btn",onClick:T,title:"复制全部"},s[1]||(s[1]=[t("i",{class:"fas fa-copy"},null,-1)]))])]),t("div",X,[t("div",{ref_key:"outputContainer",ref:n,class:"cli-output",onScroll:x},[(p(!0),d(D,null,H(c.value,(V,L)=>(p(),d("div",{key:L,class:"output-line"},[t("span",Y,m(V.content),1)]))),128)),e.value?(p(),d("div",Z,s[3]||(s[3]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),g(" 实时加载中... ")]))):A("",!0)],544)])]))}}),st=k(et,[["__scopeId","data-v-d9dab113"]]),nt={class:"common-layout"},ot={class:"message-card"},at={class:"header-title"},lt={class:"action"},ct={class:"terminal"},it=h({__name:"EnvironmentInfoView",setup(b){const c=i({name:"任务1",type:"interactive",status:"completed",target:"http://example.com",created_at:"2023-10-01 12:00:00"});return(u,e)=>{const o=r("el-tag"),l=r("el-button"),n=r("el-scrollbar"),f=r("el-aside"),y=r("el-main"),w=r("el-container");return p(),d("div",nt,[a(w,null,{default:_(()=>[a(f,{width:"50%",class:"aside"},{default:_(()=>[e[2]||(e[2]=t("h2",null,"环境信息",-1)),t("div",ot,[t("div",at,[t("p",null,m(c.value.target),1),a(o,{effect:"light",type:"info",round:""},{default:_(()=>[g(m(c.value.type),1)]),_:1})]),t("div",lt,[a(l,{type:"primary",onClick:e[0]||(e[0]=()=>{})},{default:_(()=>e[1]||(e[1]=[g(" 执行任务 ")])),_:1,__:[1]})])]),a(n,null,{default:_(()=>[t("div",ct,[a(st)])]),_:1})]),_:1,__:[2]}),a(y,null,{default:_(()=>[e[3]||(e[3]=t("h2",null,"扫描过程",-1)),a(j)]),_:1,__:[3]})]),_:1})])}}}),ut=k(it,[["__scopeId","data-v-78c88762"]]),rt={class:"report-template-view"},_t=h({__name:"ScannerPage",setup(b){return i("first"),(c,u)=>(p(),d("div",rt,[a(G),a(ut)]))}}),ft=k(_t,[["__scopeId","data-v-1a0f5315"]]);export{ft as default};
