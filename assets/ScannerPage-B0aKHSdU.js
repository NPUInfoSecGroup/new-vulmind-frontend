import{d as $,u as V,p as B,c as N,r as m,q as x,b as I,e as o,m as E,t as h,s as M,g as n,h as i,w as _,l as C,j as y,_ as b,o as R,v as j}from"./index-91zG1hWa.js";import q from"./MessageView-nICA9h1V.js";const w={class:"header-section"},A={class:"header-content"},U={key:0},z={class:"id"},F={class:"back-button"},G=$({__name:"TaskInfoView",setup(S){const p=V(),l=B().params.taskID,e=N(()=>p.getById(l)),c=m(!1);async function d(){await p.fetchTasks()}d(),x(e,a=>{a?(console.log("当前任务信息:",a),c.value=!0,f()):c.value=!1},{immediate:!0});function f(){console.log("执行后续逻辑")}return(a,u)=>{const t=i("el-button");return y(),I("div",w,[o("div",A,[c.value?(y(),I("h1",U,h(e.value.name),1)):E("",!0),o("p",z,h(M(l)),1)]),o("div",F,[n(t,{type:"primary",onClick:u[0]||(u[0]=s=>a.$router.back())},{default:_(()=>u[1]||(u[1]=[C("返回")])),_:1,__:[1]})])])}}}),H=b(G,[["__scopeId","data-v-8bc56560"]]),J={class:"common-layout"},K={class:"message-card"},L={class:"header-title"},O={class:"target"},Q={class:"command"},W={class:"action"},X=$({__name:"EnvironmentInfoView",setup(S){const r=B().params.taskID,l=V(),e=m(l.getById(r)),c=m(null),d=m(!1),f=()=>{var t,s;d.value||((t=e.value)==null?void 0:t.status)==="completed"||((s=e.value)==null?void 0:s.status)==="failed"||(d.value=!0,c.value=setInterval(async()=>{var v,g;try{await l.fetchTasks(),e.value=l.getById(r),(((v=e.value)==null?void 0:v.status)==="completed"||((g=e.value)==null?void 0:g.status)==="failed")&&(console.log(`任务 ${r} 已结束，状态: ${e.value.status}`),a())}catch(k){console.error("轮询任务状态失败:",k),a()}},5e3))},a=()=>{c.value&&(clearInterval(c.value),c.value=null),d.value=!1};function u(){l.startTask(r),f()}return R(()=>{f()}),j(()=>{a()}),x(()=>l.getById(r),t=>{e.value=t,((t==null?void 0:t.status)==="completed"||(t==null?void 0:t.status)==="failed")&&a()},{immediate:!0}),(t,s)=>{const v=i("el-button"),g=i("el-scrollbar"),k=i("el-aside"),P=i("el-main"),D=i("el-container");return y(),I("div",J,[n(D,null,{default:_(()=>[n(k,{width:"50%",class:"aside"},{default:_(()=>[s[2]||(s[2]=o("h2",null,"环境信息",-1)),o("div",K,[o("div",L,[o("span",O,h(e.value.target),1),o("span",Q,h(e.value.command),1)]),o("div",W,[n(v,{type:"primary",onClick:u},{default:_(()=>s[0]||(s[0]=[C(" 执行任务 ")])),_:1,__:[0]})])]),n(g,null,{default:_(()=>s[1]||(s[1]=[o("div",{class:"terminal"},null,-1)])),_:1,__:[1]})]),_:1,__:[2]}),n(P,null,{default:_(()=>[s[3]||(s[3]=o("h2",null,"扫描过程",-1)),n(q)]),_:1,__:[3]})]),_:1})])}}}),Y=b(X,[["__scopeId","data-v-039ed57d"]]),Z={class:"report-template-view"},T=$({__name:"ScannerPage",setup(S){return m("first"),(p,r)=>(y(),I("div",Z,[n(H),n(Y)]))}}),st=b(T,[["__scopeId","data-v-1a0f5315"]]);export{st as default};
